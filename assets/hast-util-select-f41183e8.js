import{s as E,f as $,h as L}from"./property-information-1c94c3e6.js";import{d as j}from"./direction-ad776bdc.js";import{t as A}from"./hast-util-to-string-00227f59.js";import{v as U}from"./unist-util-visit-00dde69f.js";import{E as Q,S as z}from"./unist-util-visit-parents-72556a0a.js";import{s as D,p as F}from"./comma-separated-tokens-495b557e.js";import{s as M}from"./space-separated-tokens-eedf1754.js";import{z as I}from"./zwitch-18fef54d.js";import{h as l}from"./hast-util-has-property-77f33ae2.js";import{e as R}from"./bcp-47-match-575b2c5d.js";import{w as K}from"./hast-util-whitespace-aa13952a.js";import{n as v}from"./nth-check-ae4827fe.js";import{C as V}from"./css-selector-parser-ca05af30.js";function W(e,n){const t=e.schema,o=e.language,r=e.direction,i=e.editableOrEditingHost;let a;if(n.type==="element"&&n.properties){const u=n.properties.xmlLang||n.properties.lang,f=n.properties.type||"text",d=C(n);u!=null&&(e.language=String(u)),t&&t.space==="html"?(n.properties.contentEditable==="true"&&(e.editableOrEditingHost=!0),n.tagName==="svg"&&(e.schema=E),d==="rtl"?a=d:d==="ltr"||d!=="auto"&&n.tagName==="html"||d!=="auto"&&n.tagName==="input"&&f==="tel"?a="ltr":(d==="auto"||n.tagName==="bdi")&&(n.tagName==="textarea"?a=_(A(n)):n.tagName==="input"&&(f==="email"||f==="search"||f==="tel"||f==="text")?a=n.properties.value?_(n.properties.value):"ltr":U(n,c)),a&&(e.direction=a)):e.editableOrEditingHost&&(e.editableOrEditingHost=!1)}return s;function s(){e.schema=t,e.language=o,e.direction=r,e.editableOrEditingHost=i}function c(u){if(u.type==="text")return a=_(u.value),a?Q:void 0;if(u!==n&&u.type==="element"&&(u.tagName==="bdi"||u.tagName==="script"||u.tagName==="style"||u.tagName==="textare"||C(u)))return z}}function _(e){const n=j(e);return n==="neutral"?void 0:n}function C(e){const n=e.type==="element"&&e.properties&&typeof e.properties.dir=="string"?e.properties.dir.toLowerCase():void 0;return n==="auto"||n==="ltr"||n==="rtl"?n:void 0}const X=I("operator",{unknown:re,invalid:J,handlers:{"=":Y,"~=":Z,"|=":q,"^=":ee,"$=":ne,"*=":te}});function G(e,n,t){const o=e.attrs;let r=-1;for(;++r<o.length;)if(!X(o[r],n,$(t,o[r].name)))return!1;return!0}function J(e,n,t){return l(n,t.property)}function Y(e,n,t){return Boolean(l(n,t.property)&&n.properties&&g(n.properties[t.property],t)===e.value)}function Z(e,n,t){const o=n.properties&&n.properties[t.property];return!t.commaSeparated&&o&&typeof o=="object"&&e.value&&o.includes(e.value)||l(n,t.property)&&g(o,t)===e.value}function q(e,n,t){const o=g(n.properties&&n.properties[t.property],t);return Boolean(l(n,t.property)&&e.value&&(o===e.value||o.slice(0,e.value.length)===e.value&&o.charAt(e.value.length)==="-"))}function ee(e,n,t){return Boolean(l(n,t.property)&&n.properties&&e.value&&g(n.properties[t.property],t).slice(0,e.value.length)===e.value)}function ne(e,n,t){return Boolean(l(n,t.property)&&n.properties&&e.value&&g(n.properties[t.property],t).slice(-e.value.length)===e.value)}function te(e,n,t){return Boolean(l(n,t.property)&&n.properties&&e.value&&g(n.properties[t.property],t).includes(e.value))}function re(e){throw new Error("Unknown operator `"+e.operator+"`")}function g(e,n){return typeof e=="boolean"?n.attribute:Array.isArray(e)?(n.commaSeparated?D:M)(e):String(e)}function oe(e,n){const t=n.properties.className||[];let o=-1;if(e.classNames){for(;++o<e.classNames.length;)if(!t.includes(e.classNames[o]))return!1}return!0}function ie(e,n){return Boolean(n.properties&&n.properties.id===e.id)}function ae(e,n){return e.tagName==="*"||e.tagName===n.tagName}const ue=v.default||v,le=I("name",{unknown:Te,invalid:He,handlers:{any:x,"any-link":se,blank:ce,checked:pe,dir:fe,disabled:k,empty:de,enabled:ge,"first-child":he,"first-of-type":me,has:ye,lang:_e,"last-child":be,"last-of-type":xe,matches:x,not:Ne,"nth-child":we,"nth-last-child":ve,"nth-of-type":Se,"nth-last-of-type":Ce,"only-child":Ee,"only-of-type":Ie,optional:Oe,"read-only":ke,"read-write":B,required:P,root:Be,scope:Pe}});O.needsIndex=["any","first-child","first-of-type","last-child","last-of-type","matches","not","nth-child","nth-last-child","nth-of-type","nth-last-of-type","only-child","only-of-type"];function O(e,n,t,o,r){const i=e.pseudos;let a=-1;for(;++a<i.length;)if(!le(i[a],n,t,o,r))return!1;return!0}function se(e,n){return(n.tagName==="a"||n.tagName==="area"||n.tagName==="link")&&l(n,"href")}function ce(e,n){return!H(n,t);function t(o){return o.type==="element"||o.type==="text"&&!K(o)}}function pe(e,n){return n.tagName==="input"||n.tagName==="menuitem"?Boolean(n.properties&&(n.properties.type==="checkbox"||n.properties.type==="radio")&&l(n,"checked")):n.tagName==="option"?l(n,"selected"):!1}function fe(e,n,t,o,r){return r.direction===e.value}function k(e,n){return(n.tagName==="button"||n.tagName==="input"||n.tagName==="select"||n.tagName==="textarea"||n.tagName==="optgroup"||n.tagName==="option"||n.tagName==="menuitem"||n.tagName==="fieldset")&&l(n,"disabled")}function de(e,n){return!H(n,t);function t(o){return o.type==="element"||o.type==="text"}}function ge(e,n){return!k(e,n)}function he(e,n,t,o,r){return p(r,e),r.elementIndex===0}function me(e,n,t,o,r){return p(r,e),r.typeIndex===0}function ye(e,n,t,o,r){const i={...r,found:!1,shallow:!1,one:!0,scopeElements:[n],results:[],rootQuery:N(e.value)};return w(i,{type:"root",children:n.children}),i.results.length>0}function _e(e,n,t,o,r){return r.language!==""&&r.language!==void 0&&R(r.language,F(e.value)).length>0}function be(e,n,t,o,r){return p(r,e),Boolean(r.elementCount&&r.elementIndex===r.elementCount-1)}function xe(e,n,t,o,r){return p(r,e),typeof r.typeIndex=="number"&&typeof r.typeCount=="number"&&r.typeIndex===r.typeCount-1}function x(e,n,t,o,r){const i={...r,found:!1,shallow:!1,one:!0,scopeElements:[n],results:[],rootQuery:N(e.value)};return w(i,n),i.results[0]===n}function Ne(e,n,t,o,r){return!x(e,n,t,o,r)}function we(e,n,t,o,r){const i=m(e);return p(r,e),typeof r.elementIndex=="number"&&i(r.elementIndex)}function ve(e,n,t,o,r){const i=m(e);return p(r,e),Boolean(typeof r.elementCount=="number"&&typeof r.elementIndex=="number"&&i(r.elementCount-r.elementIndex-1))}function Ce(e,n,t,o,r){const i=m(e);return p(r,e),typeof r.typeCount=="number"&&typeof r.typeIndex=="number"&&i(r.typeCount-1-r.typeIndex)}function Se(e,n,t,o,r){const i=m(e);return p(r,e),typeof r.typeIndex=="number"&&i(r.typeIndex)}function Ee(e,n,t,o,r){return p(r,e),r.elementCount===1}function Ie(e,n,t,o,r){return p(r,e),r.typeCount===1}function Oe(e,n){return!P(e,n)}function ke(e,n,t,o,r){return!B(e,n,t,o,r)}function B(e,n,t,o,r){return n.tagName==="input"||n.tagName==="textarea"?!l(n,"readOnly")&&!l(n,"disabled"):Boolean(r.editableOrEditingHost)}function P(e,n){return(n.tagName==="input"||n.tagName==="textarea"||n.tagName==="select")&&l(n,"required")}function Be(e,n,t,o,r){return Boolean((!o||o.type==="root")&&r.schema&&(r.schema.space==="html"||r.schema.space==="svg")&&(n.tagName==="html"||n.tagName==="svg"))}function Pe(e,n,t,o,r){return r.scopeElements.includes(n)}function He(){throw new Error("Invalid pseudo-selector")}function Te(e){throw e.name?new Error("Unknown pseudo-selector `"+e.name+"`"):new Error("Unexpected pseudo-element or empty pseudo-class")}function H(e,n){const t=e.children;let o=-1;for(;++o<t.length;)if(n(t[o]))return!0;return!1}function p(e,n){if(e.shallow)throw new Error("Cannot use `:"+n.name+"` without parent")}function m(e){let n=e._cachedFn;return n||(n=ue(e.value),e._cachedFn=n),n}function $e(e,n,t,o,r){return Boolean((!e.tagName||ae(e,n))&&(!e.classNames||oe(e,n))&&(!e.id||ie(e,n))&&(!e.attrs||G(e,n,r.schema))&&(!e.pseudos||O(e,n,t,o,r)))}const Le=[];function N(e){return e===null?{type:"selectors",selectors:[]}:e.type==="ruleSet"?{type:"selectors",selectors:[e]}:e}function w(e,n){n&&T(e,[],n,void 0,void 0)}function T(e,n,t,o,r){let i={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0};const a=W(e,t);return t.type==="element"&&(i=Ae(e,h(n,e.rootQuery.selectors),t,o,r)),"children"in t&&!e.shallow&&!(e.one&&e.found)&&je(e,i,t),a(),i}function je(e,n,t){const o=h(n.descendant,n.directChild);let r,i=-1;const a={count:0,types:new Map},s={count:0,types:new Map};for(;++i<t.children.length;)S(a,t.children[i]);for(i=-1;++i<t.children.length;){const c=t.children[i],u=c.type==="element"?c.tagName.toUpperCase():void 0;if(e.elementIndex=s.count,e.typeIndex=u&&s.types.get(u)||0,e.elementCount=a.count,e.typeCount=u?a.types.get(u):0,"children"in c){const f=h(o,r),d=T(e,f,t.children[i],i,t);r=h(d.generalSibling,d.adjacentSibling)}if(e.one&&e.found)break;S(s,t.children[i])}}function Ae(e,n,t,o,r){const i={directChild:void 0,descendant:void 0,adjacentSibling:void 0,generalSibling:void 0};let a=-1;for(;++a<n.length;){const s=n[a];if(e.one&&e.found)break;if(e.shallow&&s.rule.rule)throw new Error("Expected selector without nesting");if($e(s.rule,t,o,r,e)){const c=s.rule.rule;if(c){const u={type:"ruleSet",rule:c},f=c.nestingOperator==="+"?"adjacentSibling":c.nestingOperator==="~"?"generalSibling":c.nestingOperator===">"?"directChild":"descendant";b(i,f,u)}else e.found=!0,e.results.includes(t)||e.results.push(t)}s.rule.nestingOperator===null?b(i,"descendant",s):s.rule.nestingOperator==="~"&&b(i,"generalSibling",s)}return i}function h(e,n){return e&&n&&e.length>0&&n.length>0?[...e,...n]:e&&e.length>0?e:n&&n.length>0?n:Le}function b(e,n,t){const o=e[n];o?o.push(t):e[n]=[t]}function S(e,n){if(n.type==="element"){const t=n.tagName.toUpperCase(),o=(e.types.get(t)||0)+1;e.count++,e.types.set(t,o)}}const y=new V;y.registerAttrEqualityMods("~","|","^","$","*");y.registerSelectorPseudos("any","matches","not","has");y.registerNestingOperators(">","+","~");function Ue(e){if(typeof e!="string")throw new TypeError("Expected `string` as selector, not `"+e+"`");return y.parse(e)}function qe(e,n,t){const o=Qe(e,n,t);return w(o,n||void 0),o.results}function Qe(e,n,t){return{rootQuery:N(Ue(e)),results:[],scopeElements:n?n.type==="root"?n.children:[n]:[],one:!1,shallow:!1,found:!1,schema:t==="svg"?E:L,language:void 0,direction:"ltr",editableOrEditingHost:!1,typeIndex:void 0,elementIndex:void 0,typeCount:void 0,elementCount:void 0}}export{qe as s};
