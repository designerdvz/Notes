import{a as f}from"./react-99980991.js";import{r as N}from"./remark-parse-ed2eeecb.js";import{p as l}from"./prop-types-4d501b15.js";import{f as P,a as k,s as S,h as I}from"./property-information-1c94c3e6.js";import{v as R}from"./unist-util-visit-00dde69f.js";import{R as $}from"./react-is-8ec33bf7.js";import{w as j}from"./hast-util-whitespace-aa13952a.js";import{s as D}from"./space-separated-tokens-eedf1754.js";import{s as H}from"./comma-separated-tokens-495b557e.js";import{s as U}from"./style-to-object-954b9672.js";import{u as x}from"./unified-9a04a53b.js";import{r as A}from"./remark-rehype-5336432b.js";import{V as C}from"./vfile-3104d000.js";const T=["http","https","mailto","tel"];function F(e){const r=(e||"").trim(),a=r.charAt(0);if(a==="#"||a==="/")return r;const n=r.indexOf(":");if(n===-1)return r;let t=-1;for(;++t<T.length;){const o=T[t];if(n===o.length&&r.slice(0,o.length).toLowerCase()===o)return r}return t=r.indexOf("?"),t!==-1&&n>t||(t=r.indexOf("#"),t!==-1&&n>t)?r:"javascript:void(0)"}function L(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return r=>{R(r,"element",(a,n,t)=>{const o=t;let c;if(e.allowedElements?c=!e.allowedElements.includes(a.tagName):e.disallowedElements&&(c=e.disallowedElements.includes(a.tagName)),!c&&e.allowElement&&typeof n=="number"&&(c=!e.allowElement(a,n,o)),c&&typeof n=="number")return e.unwrapDisallowed&&a.children?o.children.splice(n,1,...a.children):o.children.splice(n,1),n})}}const w={}.hasOwnProperty,B=new Set(["table","thead","tbody","tfoot","tr"]);function v(e,r){const a=[];let n=-1,t;for(;++n<r.children.length;)t=r.children[n],t.type==="element"?a.push(V(e,t,n,r)):t.type==="text"?(r.type!=="element"||!B.has(r.tagName)||!j(t))&&a.push(t.value):t.type==="raw"&&!e.options.skipHtml&&a.push(t.value);return a}function V(e,r,a,n){const t=e.options,o=t.transformLinkUri===void 0?F:t.transformLinkUri,c=e.schema,s=r.tagName,i={};let E=c,u;if(c.space==="html"&&s==="svg"&&(E=S,e.schema=E),r.properties)for(u in r.properties)w.call(r.properties,u)&&z(i,u,r.properties[u],e);(s==="ol"||s==="ul")&&e.listDepth++;const b=v(e,r);(s==="ol"||s==="ul")&&e.listDepth--,e.schema=c;const h=r.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},d=t.components&&w.call(t.components,s)?t.components[s]:s,m=typeof d=="string"||d===f.Fragment;if(!$.isValidElementType(d))throw new TypeError(`Component for name \`${s}\` not defined or is not renderable`);if(i.key=[s,h.start.line,h.start.column,a].join("-"),s==="a"&&t.linkTarget&&(i.target=typeof t.linkTarget=="function"?t.linkTarget(String(i.href||""),r.children,typeof i.title=="string"?i.title:null):t.linkTarget),s==="a"&&o&&(i.href=o(String(i.href||""),r.children,typeof i.title=="string"?i.title:null)),!m&&s==="code"&&n.type==="element"&&n.tagName!=="pre"&&(i.inline=!0),!m&&(s==="h1"||s==="h2"||s==="h3"||s==="h4"||s==="h5"||s==="h6")&&(i.level=Number.parseInt(s.charAt(1),10)),s==="img"&&t.transformImageUri&&(i.src=t.transformImageUri(String(i.src||""),String(i.alt||""),typeof i.title=="string"?i.title:null)),!m&&s==="li"&&n.type==="element"){const g=W(r);i.checked=g&&g.properties?Boolean(g.properties.checked):null,i.index=y(n,r),i.ordered=n.tagName==="ol"}return!m&&(s==="ol"||s==="ul")&&(i.ordered=s==="ol",i.depth=e.listDepth),(s==="td"||s==="th")&&(i.align&&(i.style||(i.style={}),i.style.textAlign=i.align,delete i.align),m||(i.isHeader=s==="th")),!m&&s==="tr"&&n.type==="element"&&(i.isHeader=Boolean(n.tagName==="thead")),t.sourcePos&&(i["data-sourcepos"]=q(h)),!m&&t.rawSourcePos&&(i.sourcePosition=r.position),!m&&t.includeElementIndex&&(i.index=y(n,r),i.siblingCount=y(n)),m||(i.node=r),b.length>0?f.createElement(d,i,b):f.createElement(d,i)}function W(e){let r=-1;for(;++r<e.children.length;){const a=e.children[r];if(a.type==="element"&&a.tagName==="input")return a}return null}function y(e,r){let a=-1,n=0;for(;++a<e.children.length&&e.children[a]!==r;)e.children[a].type==="element"&&n++;return n}function z(e,r,a,n){const t=P(n.schema,r);let o=a;o==null||o!==o||(Array.isArray(o)&&(o=t.commaSeparated?H(o):D(o)),t.property==="style"&&typeof o=="string"&&(o=M(o)),t.space&&t.property?e[w.call(k,t.property)?k[t.property]:t.property]=o:t.attribute&&(e[t.attribute]=o))}function M(e){const r={};try{U(e,a)}catch{}return r;function a(n,t){const o=n.slice(0,4)==="-ms-"?`ms-${n.slice(4)}`:n;r[o.replace(/-([a-z])/g,_)]=t}}function _(e,r){return r.toUpperCase()}function q(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const O={}.hasOwnProperty,G="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",p={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function J(e){for(const o in p)if(O.call(p,o)&&O.call(e,o)){const c=p[o];console.warn(`[react-markdown] Warning: please ${c.to?`use \`${c.to}\` instead of`:"remove"} \`${o}\` (see <${G}#${c.id}> for more info)`),delete p[o]}const r=x().use(N).use(e.remarkPlugins||[]).use(A,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(L,e),a=new C;typeof e.children=="string"?a.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const n=r.runSync(r.parse(a),a);if(n.type!=="root")throw new TypeError("Expected a `root` node");let t=f.createElement(f.Fragment,{},v({options:e,schema:I,listDepth:0},n));return e.className&&(t=f.createElement("div",{className:e.className},t)),t}J.propTypes={children:l.string,className:l.string,allowElement:l.func,allowedElements:l.arrayOf(l.string),disallowedElements:l.arrayOf(l.string),unwrapDisallowed:l.bool,remarkPlugins:l.arrayOf(l.oneOfType([l.object,l.func,l.arrayOf(l.oneOfType([l.bool,l.string,l.object,l.func,l.arrayOf(l.any)]))])),rehypePlugins:l.arrayOf(l.oneOfType([l.object,l.func,l.arrayOf(l.oneOfType([l.bool,l.string,l.object,l.func,l.arrayOf(l.any)]))])),sourcePos:l.bool,rawSourcePos:l.bool,skipHtml:l.bool,includeElementIndex:l.bool,transformLinkUri:l.oneOfType([l.func,l.bool]),linkTarget:l.oneOfType([l.func,l.string]),transformImageUri:l.func,components:l.object};export{J as R};
